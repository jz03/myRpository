### 1.docker命令概括图 ![](D:\20-workspace\myRpository\image\docker命令.png)

### 2.镜像（image）

镜像的文件是分层的概念，所以就造成了镜像文件十分的精巧。

联合文件系统。

镜像可以是通过Dockerfile文件构建出来，也可以是当前正在运行的容器commit一个,也可以从远程仓库中拉取一个。

#### 2.1.常用命令

```shell
# 通过Dockerfile文件构建,Dockerfile是默认的文件名，就不需要指定dockerfile文件。-t 指定镜像的名称，
# .代表的是当前目录
docker build -t <image-name> .
# :代表指定的版本
docker buiod -t baidu:1.0 .
```



### 3.容器

新建，删除，运行，停止

如何进入到容器中，如何从容器中退出

- 数据卷

  相当于对一个目录的共享，容器删除之后，数据依旧存在，不会随着容器的删除而被删除

  主要应用在关键数据的持久化，配置文件的单独配置

  他们之间是相互共享的，不会因为一个容器被删除而被删除

- 匿名卷和具名卷

  这两种挂载的卷都是docker默认的路径下(/var/lib/docker/volumes)。

  匿名卷会自动生成一个hashcode来命名。

#### 3.1.常用命令

```shell
# 后台启动容器  必须要有一个前台进程，否则就会自动停止
docker run -d <id>

# 查看元数据(镜像、容器都可以)
docker inspect <id>

# 进入容器
#开启新的终端
docker exec -it <id> <指定要进入的目录>
# 进入到当前正在执行的终端
docker attach <id>

#容器停止且退出
exit
#不停止退出
ctrl+p+q

# 删除容器
docker rm <id>

```

创建mysql容器

```shell
# -d 后台运行 -p 指定映射的端口号
docker run -d -p 3306:3306 -v <指定宿主机的目录>:<指定容器中的目录> -e MYSQL_ROOT_PASSWORD=<密码> --name mysql01 mysql:5.7

docker run -d -p 3306:3306 -v /home/mysql_data/conf:/etc/mysql/conf.d -v /home/mysql_data/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=123456 --name mysql01 mysql:5.7
```

#### 3.2.CMD和ENTRYPOINT命令的区别

两者都是在dockerfile中的指令，创建的镜像在执行的时候，两个有点差别，CMD是在run命令的时候，如果追加新的shell命令，就会把dockerfile文件中的命令给替换掉。

ENTRYPOINT命令则会在run命令后边的命令中接着累加

### 4.网络

主要用来解决容器之间的通信问题

主要有四种网络模式，说明了宿主机和容器之间的网络问题，容器和容器之间的网络问题。

- host

  容器和宿主机共用一个网络系统，ip地址和端口号都是相同的

- bridge

  这个模式也是默认的，容器和宿主机之间不存在共享关系，各自有各自的网络。

- container

  容器和容器之间共享一个网络，和宿主机相互不在共享关系。

- none

  没有给容器指定网络，需要创建容器的人需要自己定义网络。

### 5.dockerfile

用来构建docker镜像的构建文件，**这些命令主要是用来构建docker镜像**。

#### 5.1.开发使用步骤

> 1.编写dockerfile文件
>
> 2.build编译dockerfile文件，生成镜像文件
>
> 3.运行镜像文件

#### 5.2.dockerfile常用指令

编写指令的时候，命令必须是大写

![](D:\20-workspace\myRpository\image\dockerfile常见指令.png)



### 6.docker compose

一次启动多个docker容器。

### 7.docker swarm

集群管理