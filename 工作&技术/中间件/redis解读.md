## 1.定义

是用C语言编写的开源高性能非关系型的键值对数据库。键的类型只能是字符串，值的类型有五种（字符串，列表，集合，散列表，有序集合）。

redis的数据是存在内存中的，所以读写速度比较快。被广泛用在了缓存方向，经常用在分布式锁。

支持事务，持久化等。

### 1.1优缺点

**优点：**

- 读写性能优异， Redis能读的速度是110000次/s，写的速度是81000次/s。
- 支持数据持久化，支持aof和rdb两种方式的持久化
- 支持事务，所有操作都是原子性的，采用的单线程
- 数据结构丰富
- 支持主从复制，主机会自动将数据同步到从机，可以进行读写分离

**缺点：**

- 收到物理内存的限制，不能用作海量数据的高性能读写。
- 不具备自动容错和恢复功能
- 难以支持在线扩容

### 1.2本地缓存和分布式缓存

缓存分为本地缓存和分布式缓存，本地缓存常见的是java中的map容器和guava缓存，本地缓存是每一个实例都有各自的缓存，实例之间的缓存不能共用，这些缓存不存在一致性。

分布式缓存是指各个实例共用一个缓存，这种缓存就是分布式缓存，缓存具有一致性，redis和memcached 都是分布式缓存。

## 2.数据类型

主要有5中类型，string、list、set、有序set、hash（唯一值）

### 3.持久化

持久化就是把缓存的数据写到磁盘当中去。持久化有两种机制。

### 3.1. rdb（默认）

是redis默认的方式，按照一定的时间将内存中的数据以快照的方式保存到磁盘当中，产生的数据文件是dump.rdb。这个周期时间可以配置。

### 3.2.aof

将redis执行的每次写命令记录到单独的日志文件中，redis重启的时候从这些日志文件中恢复数据。

在两个持久化机制中优先使用aof的恢复还原机制。因为在通常情况下AOF文件保存的数据集要比RDB文件保存的数据集要完整。

## 3.内存相关

### 3.1.如何保证redis中的数据时热点数据

redis内存数据达到一定的限度时，就会实行数据淘汰策略。

### 3.2.内存淘汰策略

#### 3.2.1.全局的键空间选择性移除

- noeviction：新写入操作写入报错
- allkeys-lru：移除最近最少用的key
- allkeys-random：随机移除几个key

#### 3.2.2.设置过期的键选择性移除

- volatile-lru：在设置了过期时间的键空间中，移除最近最少使用的key
- volatile-random：在设置了过期时间的键空间中，随机移除某个key
- volatile-ttl：在设置了过期时间的键空间中，有更早过期时间的key优先移除



