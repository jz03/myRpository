## 1.http请求

### 1.1.请求访问基本要素

1. 定义控制层 @Controller 等一系列注解

   - @Controller 对于方法中的返回值没有限制，方法可以返回jsp、html等内容，视图解析器可以发挥作用
   - @RestController 方法返回值类型是json类型，相当于在方法上添加@ResponseBody 注解，视图解析器不能起作用

2. 请求方式和路径 @RequestMapping 等一系列注解

   - @RequestMapping

     路径支持正则表达之类的模糊匹配

   - @PostMapping

   - @GetMapping

3. 定义返回结果内容格式 

   - @ResponseBody 返回结果为json等字符串，不能够进行视图解析

### 1.2.请求参数

GET请求：https://space.bilibili.com/387373900/favlist?fid=842808500&ftype=create

reset风格：https://space.bilibili.com/{id}/favlist?fid=842808500&ftype=create

https://space.bilibili.com/{路径变量}/favlist?{请求参数}

POST请求：一般是把请求参数放在了请求体中，数据更加安全

请求域中属性变量

session中的内容：前端请求表现为cookie

- 请求头信息 @RequestHeader

  ```java
  @GetMapping("/car/{id}/owner/{username}")
  public Map<String,String> getCarInfo(@RequestHeader Map<String,String> header){
      Map<String,String> res = new HashMap<>();
      res.put("header",header.toString());
      return res;
  }
  ```

  代码中给出的取出全部的头信息，也可以获取指定的头信息，用法与请求路径变量相似

- 请求cookie @CookieValue

  ```java
  @GetMapping("/car/{id}/owner/{username}")
  public Map<String,String> getCarInfo(@CookieValue("_ga") Cookie cookie){
      Map<String,String> res = new HashMap<>();
      res.put("cookie",cookie.getValue());
      return res;
  }
  ```

  入参类型也可以是String类型。

- 请求路径变量 @PathVariable

  GET请求：http://localhost:8080/car/1254/owner/jizhou

  ```java
  @GetMapping("/car/{id}/owner/{username}")
  public Map<String,String> getCarInfo(@PathVariable("id") String  id,
                                       @PathVariable("username") String username){
      Map<String,String> res = new HashMap<>();
      res.put("id",id);
      res.put("username",username);
      return res;
  }
  ```

  @PathVariable请求变量可以单独取值，也可以获取全部的值(@PathVariable Map<String,String> content)

- 请求参数 @RequestParam（常用）

  GET请求：http://localhost:8080/car/1254/owner/jizhou?age=13&inters=bast

  ```java
      @GetMapping("/car/{id}/owner/{username}")
      public Map<String,String> getCarInfo(@RequestParam("age") String age,
                                           @RequestParam("inters") String inters){
          Map<String,String> res = new HashMap<>();
          res.put("age",age);
          res.put("inters",inters);
          return res;
      }
  ```

  请求参数也可以是全部的内容，与请求路径变量使用类似

  请求变量也可是数组类型

- post请求体 @RequestBody（常用）

  请求页面

  ```html
  <form action="/save"  method="post">
      Username: <input type="text" name="username">
      Password: <input type="text" name="password">
      <input type="submit">
  </form>
  ```

  java控制器

  ```java
      @PostMapping("/save")
      public Map<String, String> getCarInfo(@RequestBody String body) {
          Map<String, String> res = new HashMap<>();
          res.put("body", body);
          return res;
      }
  ```

  可以使用@RequestParam 来接受相应的数据或者时全部的数据。

  @RequestBody在前端是json字符串的时候，可以使用map，springmvc会自动进行转换

  在form表单等普通请求下，也可以使用封装好的对象来实现接受参数

- 请求域中的属性值 

- 矩阵变量（高级）@MatrixVariable

  主要使用场景是用来解决cookie别禁用的情况，spring-boot默认被禁用

  请求样例：http://localhost:8080/cars/cell;low=10;brand=a,b,c

  