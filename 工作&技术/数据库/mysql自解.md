## 1.数据库设计的三大范式

- 确保每列都是原子性
- 表中的每列都和主键相关
- 表中的每列都和主键直接相关而不是间接相关

## 2.存储引擎

- innodb:提供了对数据库事务的支持，提供了行级锁和外键的约束。设计的目的是处理大数据的容量系统。

索引的实现方式是B+树索引，堆表。

更新（删除）操作频率也高，或者要保证数据的完整性；并发量高，支持事务和外键。

- myiasm：不提供事务的支持，也不支持行级锁和外键约束。（默认引擎）

索引的实现方式是B+树索引，索引组织表。

以读写插入为主的应用程序，比如博客系统、新闻门户网站。

- memory：所有的数据都在内存中，数据的处理速度快，安全性不高。

## 3.索引

### 3.1.定义

索引是一种特殊文件，包含着对数据库表中数据记录的指针，索引也是一中数据结构，通常是b树和b+树。

- 优点

①可以加快数据的检索速度

②使用优化隐藏器，提高系统的性能

- 缺点

①在创建索引和维护索引时比较消耗时间，对数据的增加删除和修改的时候，索引也要进行相应的修改。

②索引也占用物理空间

### 3.2.索引使用的场景

- where条件
- order by
- join on

在where条件中很容易造成索引覆盖的情况。


### 3.3.索引的几种类型

- 主键索引：一张表只能有一个主键索引
- 唯一索引：数据列不允许重复，允许为NULL值，一张表可以有多个唯一索引

可以通过 `ALTER TABLE table_name ADD UNIQUE (column);` 创建唯一索引

可以通过 `ALTER TABLE table_name ADD UNIQUE (column1,column2);` 创建唯一组合索引

- 普通索引：基本的索引类型，没有唯一性的限制，允许为NULL值。

可以通过`ALTER TABLE table_name ADD INDEX index_name (column);`创建普通索引

可以通过`ALTER TABLE table_name ADD INDEX index_name(column1, column2, column3);`创建组合索引

- 全文索引：常见于搜索引擎

可以通过`ALTER TABLE table_name ADD FULLTEXT (column);`创建全文索引

### 3.4.索引的原理

把无序的查询变为有序的查询

- B+树算法（推荐使用）

它不仅可以被用在=,>,>=,<,<=和between这些比较操作符上，而且还可以用于like操作符，只要它的查询条件是一个不以通配符开头的常量。

```sql
-- 只要它的查询条件是一个不以通配符开头的常量
select * from user where name like 'jack%'; 
-- 如果一通配符开头，或者没有使用常量，则不会使用索引，例如： 
select * from user where name like '%jack'; 
```
- hash算法

被用在=,<=>（相当于=）操作符。无法进行范围查询。不支持排序。

#### 3.4.1.使用B+树的好处

B+树的内部节点只放置key，只有在叶子节点上存放key和value。B树在内部节点上存放的是key和value。B+树的叶子节点组成一个链表的形式，查询遍历的时间复杂度更小。

### 3.5.创建索引的原则

- 最左匹配原则，创建的索引字段尽可能的靠左，在SQL条件中优先执行前边的条件，如果前边的条件已经确定，后边的条件就不起作用。
- 字段频繁作为查询条件的，适合创建索引
- 字段更新频繁的，不适合创建索引
- 枚举字段，重复值比较多的列，不适合创建索引
- 定义为text、image和bit的数据类型的列不要建立索引

### 3.6.创建索引注意事项

- 所在列是非空字段

虽然索引允许字段为null的情况，但是null的比较运算比较复杂，对性能的影响较大

- 所在列的唯一值较多（离散度大）
- 所在列的内容较小

